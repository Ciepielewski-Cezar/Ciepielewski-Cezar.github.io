function locateFeaturesHtml(){var features_block=$('.table-data-sheet');return features_block.length>0?features_block:false;}
function sortFeatures(){if(typeof(feature_positions)=='object'&&feature_positions!=null&&$.map(feature_positions,function(n,i){return i;}).length>0){var featureRow,multifeatureWrapper;for(var i in features_position){featureRow=$('#feature_'+features_position[i]);featureRow.prependTo('#global_features_wrapper');}
for(var i in ordered_features){for(id_feature in ordered_features[i])break;if(id_feature&&ordered_features[i][id_feature].length){featureRow=$('#feature_'+id_feature);multifeatureWrapper=featureRow.find('.features_wrap');for(var y in ordered_features[i][id_feature]){multifeatureWrapper=featureRow.find('#value_'+ordered_features[i][id_feature][y]);if(multifeatureWrapper.length){multifeatureWrapper.prependTo(featureRow.find('ul'));}}}}}}
function replaceNativeFeatures(){if(typeof(pfeatures)=='object'&&pfeatures!=null){var features_block=locateFeaturesHtml();if(features_block!=false){features_block.empty().attr('id','global_features_wrapper');var index=0,feature=false,currentBlock=false,currentList=false,currentListBlock=false;for(var id_feature in pfeatures){index=0;currentBlock=false;currentList=false;currentListBlock=false;for(var id_feature_value in pfeatures[id_feature]){feature=pfeatures[id_feature][id_feature_value];if(index==0){currentBlock=$(document.createElement('tr')).addClass('features_wrap').attr('id','feature_'+id_feature);currentList=$(document.createElement('ul'));}
currentList.append($(document.createElement('li')).attr('id','value_'+id_feature_value).html(feature.value));index++;}
currentListBlock=$(document.createElement('td')).append(currentList);if(currentBlock!=false)
$('#global_features_wrapper').append(currentBlock.append($(document.createElement('td')).html(feature.name)).append(currentListBlock));}}}}
$(function(){replaceNativeFeatures();sortFeatures();});